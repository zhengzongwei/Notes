# DNS解析

> 在内网访问中，我们一般会使用IP地址对服务器进行访问，但是如果机器多了之后，通过IP地址访问会显得很不方便，而使用域名访问会很清晰明白。下面介绍下如同在内网通过域名对内网中各服务进行访问和配置。

在内网搭建 DNS 服务时，有几种常见的选择，取决于你的需求和偏好。以下是一些推荐的选项：

1. **Bind（Berkeley Internet Name Domain）:**
   - **优势：** Bind 是一个开源的 DNS 服务器，广泛使用且功能强大。它支持众多 DNS 协议和标准，适用于各种网络环境。
   - **注意事项：** Bind 的配置相对复杂，但一旦配置完成，它可以提供高度定制化的 DNS 服务。
2. **Unbound:**
   - **优势：** Unbound 是一个快速、轻量级的 DNS 服务器，设计用于高性能和低资源占用。它支持 DNSSEC（DNS 安全扩展）并易于配置。
   - **注意事项：** Unbound 更适合一些较小规模的环境，但在性能方面表现优秀。
3. **dnsmasq:**
   - **优势：** dnsmasq 是一个轻量级的 DNS 转发器和 DHCP 服务器。它简单易用，适合小型网络。
   - **注意事项：** dnsmasq 的功能相对较为基础，适合简单的网络环境。
4. **PowerDNS:**
   - **优势：** PowerDNS 提供了一个模块化的架构，支持多种后端存储（如数据库、文件等），适用于大规模网络。
   - **注意事项：** PowerDNS 的配置较为灵活，适合有一定经验的管理员。

在选择 DNS 服务器时，需要考虑以下因素：

- **易用性：** 一些服务器可能配置更为简单，适合初学者；而另一些可能提供更多的配置选项，适合有经验的管理员。
- **性能：** 不同的 DNS 服务器在性能方面有差异，具体取决于网络规模和负载。
- **安全性：** 考虑 DNSSEC 支持以及其他安全功能，确保你的 DNS 服务器对恶意攻击有一定的防御能力。
- **功能：** 确保所选 DNS 服务器满足你的特定需求，如是否需要支持 DNSSEC、IPv6 等。

## CoreDNS

CoreDNS是一款灵活可扩展的 DNS 服务器，并且基于插件架构，具有强大的模块化能力。其快速，简单，可扩展等特性也非常受人欢迎。



```bash
cat >/etc/coredns/Corefile<<EOF
.:53 {
    hosts {
        192.168.72.15 example.com
        192.168.72.16 example1.com
        fallthrough
    }
    
    forward . 114.114.114.114 8.8.8.8
    log
    errors
}
EOF

```

使用文本的方式管理hosts

```bash
# cat Corefile
.:53 {
    hosts /etc/coredns/hostsfile {
        fallthrough
    }
    forward . 8.8.8.8:53
    log
}

# cat hostsfile
192.168.72.16 example1.org

```



